# HYPERBOLOID MODEL
# v3 lognormal for truncated normal
model{
  # stimulus scale dependent precision for priors
  precision = 1/5^2
  # response determinism
  for (i in 1:nParticipants){
    # participant-specific parameters
    sigma[i] ~ dlnorm(0, precision)
    kappa[i] ~ dlnorm(0, precision)
    tau[i] ~ dlnorm(0, precision)
    for (j in 1:nTrials){
      # values for LL and SS alternatives
      valueLL[i, j] =  rLL[i, j]/(1 + kappa[i]*tLL[i, j])^tau[i]
      valueSS[i, j] =  rSS[i, j]/(1 + kappa[i]*tSS[i, j])^tau[i]
      # probability of choosing larger later
      theta[i, j] = phi((valueLL[i, j] - valueSS[i, j])/sigma[i])
      # decision
      decision[i, j] ~ dbern(theta[i, j])      
    }
  }
}